package unlimited.litehacks.mods.exploit;

import net.minecraft.entity.EntityPose;
import net.minecraft.item.ItemStack;
import net.minecraft.item.Items;
import net.minecraft.network.packet.c2s.play.CreativeInventoryActionC2SPacket;
import net.minecraft.network.packet.c2s.play.PlayerActionC2SPacket;
import net.minecraft.network.packet.c2s.play.PlayerMoveC2SPacket;
import net.minecraft.text.Text;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.Direction;
import org.lwjgl.glfw.GLFW;
import unlimited.litehacks.mods.Module;
import unlimited.litehacks.mods.settings.BooleanSetting;
import unlimited.litehacks.mods.settings.ModeSetting;
import unlimited.litehacks.mods.settings.NumberSetting;

public class DeathExplorer extends Module {

    private boolean deathDisconnect = false;
    private int deathTimer = 0;

    public DeathExplorer() {
        super("DeathExplorer", "Wonder the world while dead", Category.EXPLOIT);
    }

    @Override
    public void onEnable() {
        assert mc.player != null;
    }

    @Override
    public void onDisable() {
        assert mc.player != null;
        mc.player.setHealth(0);
        super.onDisable();
        deathDisconnect = false;
        deathTimer = 0;
    }

    @Override
    public void onTick() {
        if (mc.player != null) {

            if (mc.player.isDead()) {
                mc.player.setHealth(20f);
                mc.setScreen(null);
                System.out.println("You died lol");
                deathDisconnect = true;
                mc.player.setPose(EntityPose.DYING);
            }


            if (deathDisconnect) {
                deathTimer++;
                if (deathTimer == 50) {
                    mc.player.clientWorld.disconnect();
                    mc.player.networkHandler.onDisconnected(Text.literal("You are now dead. Join any server you choose :)"));
                    deathDisconnect = false;
                }
            }


        }

        super.onTick();
    }



}
